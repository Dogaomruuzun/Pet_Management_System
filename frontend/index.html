<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Pet Management Pro</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="light">

    <!-- SIDEBAR -->
    <aside id="sidebar" style="display:none;"> <!-- Hidden by default until logged in -->
        <h2>üêæ Vet Panel</h2>
        <ul>
            <li onclick="openPage('dashboard')">Dashboard</li>
            <li onclick="openPage('pets')">Pets</li>
            <li onclick="openPage('medical')">Medical History</li>
            <li onclick="openPage('vaccines')">Vaccinations</li>
            <li onclick="openPage('weight')">Weight Tracking</li>
            <li onclick="openPage('appointments')">Appointments</li>
            <li onclick="openPage('ai')">AI Assistant</li>
            <li onclick="openPage('owner')">Owner Info</li>
        </ul>

        <div style="margin-top: auto;">
            <button id="darkToggle" onclick="toggleDark()">Dark Mode</button>
            <button onclick="logout()" style="background-color: #e74c3c; margin-top: 10px;">Logout</button>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main>

        <!-- LOGIN / REGISTER PAGE -->
        <section id="loginPage" class="page active"
            style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;">
            <div id="loginForm" class="card" style="width: 300px; text-align: center;">
                <h1>Login</h1>
                <input id="loginEmail" placeholder="Email" style="width: 100%; margin-bottom: 10px;">
                <input id="loginPassword" type="password" placeholder="Password"
                    style="width: 100%; margin-bottom: 10px;">
                <button onclick="login()" style="width: 100%;">Login</button>
                <p style="margin-top: 10px;">Don't have an account? <a href="#" onclick="showRegister()">Sign Up</a></p>
            </div>

            <div id="registerForm" class="card" style="display: none; width: 300px; text-align: center;">
                <h1>Register</h1>
                <p style="font-size: 14px; margin-bottom: 10px; color: #666;">Create a new Veterinarian Account</p>
                <input id="regName" placeholder="Full Name" style="width: 100%; margin-bottom: 10px;">
                <input id="regEmail" placeholder="Email" style="width: 100%; margin-bottom: 10px;">
                <input id="regPassword" type="password" placeholder="Password"
                    style="width: 100%; margin-bottom: 10px;">
                <!-- Role selector removed, defaults to vet -->
                <button onclick="register()" style="width: 100%;">Sign Up</button>
                <p style="margin-top: 10px;">Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
            </div>
        </section>

        <!-- DASHBOARD -->
        <section id="dashboard" class="page">
            <h1>Dashboard</h1>

            <div class="grid-3">
                <div class="card">
                    <h3>Total Pets</h3>
                    <p id="dashPets">0</p>
                </div>
                <div class="card">
                    <h3>Upcoming Appointments</h3>
                    <p id="dashAppointments">0</p>
                </div>
                <div class="card">
                    <h3>Vaccines Due Soon</h3>
                    <p id="dashVaccines">0</p>
                </div>
            </div>

            <div class="card">
                <h3>Pet Type Distribution</h3>
                <div class="chart-container">
                    <canvas id="chartPetTypes"></canvas>
                </div>
            </div>
        </section>

        <!-- PETS PAGE -->
        <section id="pets" class="page">
            <h1>Pets</h1>

            <div class="card">
                <h2>Add New Pet</h2>
                <input id="petName" placeholder="Name">
                <input id="petAge" type="number" placeholder="Age">
                <input id="petType" placeholder="Type (Dog, Cat...)">
                <input id="petOwnerName" placeholder="Search Owner Name..." list="ownersList">
                <input type="hidden" id="petOwner"> <!-- Hidden to store actual ID -->

                <label>Pet Photo:</label>
                <input type="file" id="petPhotoFile" class="file-upload-wrapper">
                <img id="petPhotoPreview" style="display:none; width: 100px; margin-top: 10px; border-radius: 6px;">
                <input id="petPhoto" type="hidden"> <!-- Stores URL after upload -->

                <button onclick="addPet()">Add Pet</button>
            </div>

            <div id="petList" class="grid"></div>
        </section>

        <!-- MEDICAL HISTORY -->
        <section id="medical" class="page">
            <h1>Medical History</h1>

            <div class="card">
                <h3>Search Records</h3>
                <input type="text" id="medicalSearch" placeholder="Search Pet Name..." list="petSearchList"
                    onkeyup="searchRecords('medical', this.value)">
            </div>

            <div class="card">
                <h2>Add Record</h2>
                <label>Select Pet:</label>
                <input id="medPetName" placeholder="Search Pet..." list="allPetsList">
                <input type="hidden" id="medPetId">

                <label>Date of Visit:</label>
                <input id="medDate" type="date">

                <input id="medDiag" placeholder="Diagnosis">
                <input id="medTreat" placeholder="Treatment">
                <textarea id="medNotes" placeholder="Notes"></textarea>
                <input id="medAttach" placeholder="Attachment URL">
                <button onclick="addMedical()">Add</button>
            </div>

            <div id="medicalList"></div>
        </section>

        <!-- VACCINATIONS -->
        <section id="vaccines" class="page">
            <h1>Vaccinations</h1>

            <div class="card">
                <h3>Search Records</h3>
                <input type="text" id="vaccineSearch" placeholder="Search Pet Name..." list="petSearchList"
                    onkeyup="searchRecords('vaccines', this.value)">
            </div>

            <div class="card">
                <h2>Add Vaccine Record</h2>
                <label>Select Pet:</label>
                <input id="vacPetName" placeholder="Search Pet..." list="allPetsList">
                <input type="hidden" id="vacPetId">

                <input id="vacName" placeholder="Vaccine Name">

                <label>Date Given:</label>
                <input id="vacGiven" type="date">

                <label>Next Due:</label>
                <input id="vacNext" type="date">

                <button onclick="addVaccine()">Add</button>
            </div>

            <div id="vaccineList"></div>
        </section>

        <!-- WEIGHT TRACKING -->
        <section id="weight" class="page">
            <h1>Weight Tracking</h1>

            <div class="card">
                <h3>Search Records (Filters Chart)</h3>
                <input type="text" id="weightSearch" placeholder="Search Pet Name..." list="petSearchList"
                    onkeyup="searchRecords('weight', this.value)">
            </div>

            <div class="card">
                <h2>Add Weight</h2>
                <label>Select Pet:</label>
                <input id="wPetName" placeholder="Search Pet..." list="allPetsList">
                <input type="hidden" id="wPetId">

                <input id="wValue" type="number" placeholder="Weight (kg)">

                <label>Weighing Date:</label>
                <input id="wDate" type="date">

                <button onclick="addWeight()">Add</button>
            </div>

            <div class="card">
                <h2>Weight Chart</h2>
                <div class="chart-container">
                    <canvas id="weightChart"></canvas>
                </div>
            </div>

            <div id="weightList"></div>
        </section>

        <!-- APPOINTMENTS -->
        <section id="appointments" class="page">
            <h1>Appointments</h1>

            <div class="card">
                <h3>Search Appointments</h3>
                <input type="text" id="appointmentSearch" placeholder="Search Pet Name..." list="petSearchList"
                    onkeyup="searchRecords('appointments', this.value)">
            </div>

            <div class="card">
                <h2>New Appointment</h2>
                <label>Select Pet:</label>
                <input id="aPetName" placeholder="Search Pet..." list="allPetsList">
                <input type="hidden" id="aPetId">

                <label>Appointment Date:</label>
                <input id="aDate" type="date">

                <label>Time:</label>
                <input id="aTime" type="time">

                <input id="aReason" placeholder="Reason">

                <label>Veterinarian:</label>
                <select id="aVet">
                    <option value="">-- Select Vet --</option>
                </select>

                <button onclick="addAppointment()">Add Appointment</button>
            </div>

            <div id="appointmentList"></div>
        </section>

        <!-- OWNERS (New Page) -->
        <section id="owner" class="page">
            <h1>Manage Owners</h1>

            <div class="card">
                <h2>Add New Owner</h2>
                <input id="ownerId" placeholder="TC Identity Number (ID)">
                <input id="ownerName" placeholder="Full Name">
                <input id="ownerPhone" placeholder="Phone Number">
                <input id="ownerAddress" placeholder="Address">
                <input id="ownerEmail" placeholder="Email (Optional)">
                <button onclick="addOwner()">Create Owner</button>
            </div>

            <div id="ownerList" class="grid-3"></div>
        </section>

        <!-- DATALISTS -->
        <datalist id="petSearchList"></datalist> <!-- Keeps existng search logic -->
        <datalist id="allPetsList"></datalist>
        <datalist id="ownersList"></datalist>

        <!-- AI ASSISTANT -->
        <section id="ai" class="page">
            <h1>AI Assistant</h1>

            <div class="card">
                <h2>Lifespan Prediction</h2>
                <input id="aiAge" type="number" placeholder="Age">
                <button onclick="aiLifespan()">Predict</button>
                <p id="aiLifeResult"></p>
            </div>

            <div class="card">
                <h2>Health Score</h2>
                <input id="aiHSWeight" type="number" placeholder="Weight">
                <input id="aiHSAge" type="number" placeholder="Age">
                <button onclick="aiHealth()">Predict</button>
                <p id="aiHealthResult"></p>
            </div>

            <div class="card">
                <h2>Breed Risk</h2>
                <input id="aiBreedAge" type="number" placeholder="Age">
                <button onclick="aiBreed()">Predict</button>
                <p id="aiBreedResult"></p>
            </div>
        </section>

        <section id="petDetail" class="page">
            <h1>Pet Details</h1>
            <div id="petDetailContent"></div>
        </section>

        <!-- EDIT PET MODAL (Existing) -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <h2>Edit Pet</h2>
                <input id="editName" placeholder="Name">
                <input id="editAge" type="number" placeholder="Age">
                <input id="editType" placeholder="Type">
                <!-- Hidden or View Only photo for now in simple edit -->
                <input id="editPhoto" placeholder="Photo URL">

                <div style="text-align: right; margin-top: 15px;">
                    <button class="close-btn" onclick="closeModal('editModal')">Cancel</button>
                    <button onclick="savePetEdit()">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- GENERIC RECORD EDIT MODAL -->
        <div id="recordModal" class="modal">
            <div class="modal-content">
                <h2>Edit Record</h2>
                <div id="recordModalContent"></div>
                <div style="text-align: right; margin-top: 15px;">
                    <button class="close-btn" onclick="closeModal('recordModal')">Cancel</button>
                    <button onclick="saveRecordEdit()">Save Changes</button>
                </div>
            </div>
        </div>


    </main>

    <script src="script.js"></script>
</body>

</html>